# 复杂业务过程叙述

## 作业流程

>1. 老师发布作业：老师选择作业名称，截止日期，然后选择题目描述和题目代码框架，代码框架的格式可以是一个老师自己的git仓库地址，也可以是一个压缩包，也可以没有。之后系统会生成一次作业，并利用代码框架(压缩包即解压，git仓库地址即fork)和题目描述在课程对应的一个organization账户下，生成一个作业项目。
>
>
>   需要做作业的学生默认为所有选择了该课程的学生。
>
>2. 在只有使用人数不多的情况下，系统自动学生对应的git账号下fork该作业项目，并通知学生有一次新的作业。如果不能做到，就在通知中附上该作业项目的git地址，让学生fork到自己的仓库中。之后学生会pull此项目到本地，开始做作业。
>
>3. 学生做完作业之后，将作业push到自己的git上。
>
>4. deadline到的时候，系统自动调用代码分析程序的接口，将此次作业所有的学生的git地址作为参数。
>
>5. 之后代码分析程序会分析git地址中的项目。
>
>6. 老师请求查看这次作业的情况：系统调用代码分析程序的接口，将***作为参数，获得这次作业的结果列表，列表的每一项是一个学生的作业情况，每个学生的作业情况包括成绩和详细分析(url)。系统在对成绩进行过统计分析之后，将统计分析的结果和结果这次作业的结果列表返回给老师。
>
>7. 学生请求查看这次作业的情景：系统调用代码分析程序的接口，将***作为参数，获得这次作业的结果，包括成绩和详细分析(url)。
>
>8. 正常流程结束

## 考试流程

>1. 老师发布考试：老师填写考试名称和考试备注信息，然后可以选择多个时间段。时间段内容包括：考试开始时间和结束时间；考试班级(仅能选择系统中已有的班级)；考试描述和代码框架(同发布作业)。这么做的原因是为了方便老师分不同班级不同试题进行考试。
>2. 学生参与考试：考试时间开始之后(或者之前一会)，系统提供接口给学生下载config，下载完成之后学生本地的环境会自动fork organization账户下的这次考试到学生的git账户下，并pull到本地，之后参与考试。
>3. 考试时间结束后的流程和作业类似。

## 账户管理流程

>1. 学生账号由系统分配(管理员在学期初导入)。学生在系统中的账户和gitlab账户绑定，用户名均为学号，系统对学生的账号有管理权
>2. 某课程的学生名单推算：课程有年级/学期,如大二/一学期,学生有年级属性.每过一个学期,系统会删除学生之前的课程,并加入本学期的所有课程.
>   特殊情况处理:
>   2.1.重修/提前选课: 通过选课码加入课程
>   2.2.转院 : 通过新建用户,设置其年级属性,使系统可以推断出他的课程
>   2.3.退选(如已经提前修过该课) : 对课程进行退选,可以填写理由,若管理员同意则退选



